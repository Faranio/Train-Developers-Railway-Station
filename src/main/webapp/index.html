<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>TrainDevelopers | Main page</title>
	<link rel = "stylesheet" href = "startPageStyle.css">
	<link rel = "icon" href = "https://library.kissclipart.com/20180830/abq/kissclipart-train-clipart-train-rail-transport-rapid-transit-c4c301d377f15d73.png">
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<script type="text/javascript">

function updateList(items) {
	
	var id = 0;
	
    $("#my-list").html("");
    items.forEach(function (e) {
    	var arr = e.split("@");
    		$("#my-list").append("<li>" + arr[0] + "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTime: " + arr[1] +  " <button id=\"item_" + id + "\" type=\"button\" onclick=\"clearItem(" + id.toString() + ")\"> Remove</button></li><br>");

        id++;
    });
    
}

function getListItems() {
    $.ajax({
        url : 'services/items',
        dataType : 'json',
        success : function(r) {
            updateList(r);
        }
    });
}

function validate(text) {
	  var re = /[^A-Za-z0-9\s]+/;
	  return re.test(text);
}

function sendListItem() {
    var listItem = $("#texttosend").val();
    
    if (!validate(listItem) && listItem.length != 0 && listItem.length < 50) {
    
	    $.post("services/items", { newEntry: listItem}, function() {
	        getListItems();
	    });
    
	}
}

function clearList() {
	$.ajax({
		url : 'services/items',
		dataType : 'json',
		type : "DELETE",
		success : function(r) {
			updateList(r);
		}
	});
}

function clearItem(id) {
	
	$.ajax({
		url : 'services/items/' + id,
		dataType : 'json',
		type : "DELETE",
		success : function(r) {
			updateList(r);
		}
	});
	
}

$(document).ready(function () { 
	
    getListItems();
    
    $("#send-item").on('click', function () {
        sendListItem();
    });
    
    $("#clear-item").on('click', function () {
        clearList();
    });
    
});

	</script>
</head>
<body>
	<h2>TrainDevelopers</h2>

	<p style="font-style: italic">
	Ranked as "the best website to provide ticket reservation services".
	</p>
	<a href="routes.html">See routes for today</a>
	<br>
	<br>
	<input type="text" id="user-email" placeholder="Email">
	<br>
	<input type="text" id="user-password" placeholder="Password">
	<br>
	<button id="send-item" type="button" >Log In</button>
	<br>
	<br>
	Don't have an account?<a href="signup.html">Sign up</a>
	
	<h4>Recent News</h4>
	<p>
	Lorem ipsum
	</p>
	<p>
	Lorem ipsum
	</p>
	<p>
	Lorem ipsum
	</p>

</body>
</html>