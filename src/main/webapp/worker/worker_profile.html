<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>TrainDevelopers | Main page</title>
	<link rel = "stylesheet" type="text/css" href = "../css/header_footer.css">
	<link rel = "icon" href = "https://library.kissclipart.com/20180830/abq/kissclipart-train-clipart-train-rail-transport-rapid-transit-c4c301d377f15d73.png">
	<script src="../scripts/jquery.min.js"></script>
	<script type="text/javascript">
	
	function getInfo() {
		
        $.get('../services/workerAccInfo', {}, function(r) {
            update(r);
        }, 'json');
        
    }
	
	function update(items) {
		
		$("#first-name").append("First name: " + items[0]);
		$("#last-name").append("Last name: " + items[1]);
		$("#email").append("Email: " + items[2]);
		$("#position").append("Position: " + items[3]);
		
		if (items[8] == 'M') {
			
			$("#gender").append("Gender: " + "Male");
			
		} else {
			
			$("#gender").append("Gender: " + "Female");
			
		}
		
		$("#birth-date").append("Birth Date: " + items[5]);
		$("#address").append("Home Address: " + items[6]);
		$("#phone-number").append("Phone Number: " + items[7]);
		$("#bank-acc-num").append("Bank Account Number: " + items[4]);
		$("#salary").append("Salary: " + items[10]);
		
		if (items[3] == "Agent") {
			
			$("#payday").append("Pay day: " + items[9]);
			$("#manager-name").append("Manager Name: " + items[12] + " " + items[13]);
			$("#manager-email").append("Manager Email: " + items[11]);
		
			$("#manager-block").remove();
			$("#admin-block").remove();
			
		} else if (items[3] == "Manager"){
			
			$("#payday").append("Pay day: " + items[9]);
			
			$("#agent-block").remove();
			$("#admin-block").remove();
			
		} else {
			
			$("#agent-block").remove();
			$("#manager-block").remove();
			
		}
		
    }
	
	$(document).ready(function () {	
		
		getInfo();
		
		$("#logout").on('click', function (r) {
			$.post("../services/logout", {}, function(r){
				console.log(r);
			}).fail(function(r) {
				alert("Error!");
		    });
	    });
		
		$("#manage-agents").on('click', function (r) {
			
			window.location.href = "manage_agents.html";
			
	    });
		
		$("#manage-routes").on('click', function (r) {
			
			window.location.href = "route_management.html";
			
	    });
		
		$("#manage-managers").on('click', function (r) {
			
			window.location.href = "manage_managers.html";
			
		});
		
		$("#subordinate-employee").on('click', function (r) {
			
			window.location.href = "subordinate_employee.html";
			
		});

		$("#main-page").on('click', function () {
			window.location.href = "../index.html";
		});
	    
	});
	
	</script>
</head>
<body>
<!-- Header -->
	<div class="header">
		<h1>Train Developers</h1>
	</div>

<!-- Menu bar -->
	<div class="nav">
		<ul>
			<li id="main-page">Main Page</li>
			<li id="profile-button" style="display:none">Go to profile</li>
			<li id="log-out-button" style="display:none">Log Out</li>
		</ul>
	</div>
	<h2>Personal profile</h2>
	<div id="first-name"></div>
	<div id="last-name"></div>
	<div id="email"></div>
	<br>
	<button id="changePassword" onclick="window.location.href='change_password.html'">Change Password</button>
	<br><br>
	<div id="agent-block">
	<button id="passenger-requests">See Passenger Requests</button>
	<br><br>
	</div>
	<div id="manager-block">
	<button id="manage-agents">Manage Agents</button>
	<br><br>
	<button id="manage-routes">Manage Routes</button>
	<br><br>
	<button id="subordinate-employee">My Employees</button>
	<br><br>
	</div>
	<div id="admin-block">
	<button id="manage-managers">Manage Managers</button>
	<br><br>
	</div>
	<div id="position"></div>
	<div id="gender"></div>
	<div id="birth-date"></div>
	<div id="address"></div>
	<div id="phone-number"></div>
	<div id="bank-acc-num"></div>
	<div id="salary"></div>
	<div id="payday"></div>
	<div id="manager-name"></div>
	<div id="manager-email"></div>
<!-- Contacts -->
	<div class="footer">
		<h3>Contact us</h3>
		<div class="contact-container">
			<div><p>email: train.dev@nu.edu.kz</p></div>
			<div><p>telephone: +77777777777</p></div>
			<div><p>telephone: +77777777778</p></div>
		</div>
</div>
</body>
</html>
